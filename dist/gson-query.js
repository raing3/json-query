/*! For license information please see gson-query.js.LICENSE.txt */
(()=>{var __webpack_modules__={61:(e,r,t)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var a=t(421).parse,i=t(152),u=i.run,c=i.VALUE_INDEX,f=i.POINTER_INDEX,s={value:function(e){return e.map((function(e){return e[c]}))},pointer:function(e){return e.map((function(e){return e[f]}))},all:function(e){return e},map:function(e){var r={};return e.forEach((function(e){return r[e[f]]=e[c]})),r}};function l(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value";if(null==r)return[];""===(r=r.replace(/(\/$)/g,""))&&(r="#");var o=a(r);if(null==o)throw new Error("empty ast for '".concat(r,"'"));if(""!==o.rest)throw new Error("Failed parsing queryString from: '".concat(o.rest,"'"));var i=u(e,o);return s[t]?s[t](i):"function"==typeof t?i.map((function(e){return t.apply(void 0,n(e))})):i}Object.keys(s).forEach((function(e){return l[e.toUpperCase()]=e})),e.exports=l},241:(e,r,t)=>{t(61),t(529),t(509),t(797)},152:(e,r,t)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var a=t(388),i=a.expand,u=a.select,c=a.cache,f=t(513),s=f.VALUE_INDEX,l=f.KEY_INDEX,p=f.PARENT_INDEX,y=f.POINTER_INDEX;function h(e,r,t){var o=e;return r.children.forEach((function(e){if(i[e.type])o=function(e,r,t,o){for(var a=[],i=0,u=r.length;i<u;i+=1)a.push.apply(a,n(e(t,r[i],t,o)));return a}(i[e.type],o,e,t);else{if(!u[e.type])throw new Error("Unknown filter ".concat(e.type));o=function(e,r,t,n){for(var o=[],a=0,i=r.length;a<i;a+=1){var u=e(t,r[a],n);u&&o.push(u)}return o}(u[e.type],o,e,t)}})),o}function m(e,r,t){var o=[],a=e;return r.children.forEach((function(r){if("orPattern"===r.type)return o.push.apply(o,n(a)),void(a=e);a=g(a,r,t)})),o.push.apply(o,n(a)),o}function d(e,r,t){var o=[],a=r.children.find((function(e){return"quantifier"===e.type})),i=function(e){return null==e?1:"*"===e||"+"===e?1/0:(e=parseInt(e),isNaN(e)?1:e)}(a&&a.text),u=e;a&&"*"===a.text&&o.push.apply(o,n(u));for(var c=0;u.length>0&&c<i;)u=m(u,r,t),o.push.apply(o,n(u)),c+=1;return o}function g(e,r,t){var n;return n="query"===r.type?h(e,r,t):"pattern"===r.type?d(e,r,t):function(e,r,t){var n=e;return r.children.forEach((function(e){return n=g(n,e,t)})),n}(e,r,t),c.reset(),c.mem.push(e),n}e.exports={VALUE_INDEX:s,KEY_INDEX:l,PARENT_INDEX:p,POINTER_INDEX:y,run:function(e,r){return c.reset(),c.mem.push(e),g([[e,null,null,"#"]],r)}}},513:e=>{e.exports={VALUE_INDEX:0,KEY_INDEX:1,PARENT_INDEX:2,POINTER_INDEX:3}},388:(e,r,t)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var a=t(134),i=function(e,r){return"".concat(e,"/").concat(r)},u=t(513),c=u.VALUE_INDEX,f=u.POINTER_INDEX,s=Object.prototype.toString,l=/Object|Array/,p=function(e){return l.test(s.call(e))};function y(e){return new RegExp(e.text.replace(/(^{|}$)/g,""))}var h={mem:[],get:function(e,r){var t=e[c][r];if(!h.mem.includes(t))return p(t)&&h.mem.push(t),[t,r,e[c],i(e[f],r)]},reset:function(){h.mem.length=0}},m={any:function(e,r){var t=r[c];return a.keys(t).map((function(e){return[t[e],e,t,i(r[f],e)]}))},all:function(e,r){var t=[r];return a.forEach(r[c],(function(o,a){var i=h.get(r,a);i&&t.push.apply(t,n(m.all(e,i)))})),t},regex:function(e,r){var t=y(e),n=r[c];return a.keys(n).filter((function(e){return t.test(e)})).map((function(e){return[n[e],e,n,i(r[f],e)]}))}},d={escaped:function(e,r){return d.property(e,r)},property:function(e,r){var t=e.text;if(r[c]&&void 0!==r[c][t])return[r[c][t],t,r[c],i(r[f],t)]},typecheck:function(e,r){var t,n=e.text.replace(/^\?:/,"");return"value"===n?p(r[c])?void 0:r:(t=r[c],s.call(t).match(/\s([^\]]+)\]/).pop().toLowerCase())===n?r:void 0},lookahead:function(e,r){var t=!0,n=!1;return e.children.forEach((function(e){if("expression"===e.type){var o=void 0!==d.expression(e,r);t=!0===n?t||o:t&&o}else n="orExpr"===e.type})),t?r:void 0},expression:function(e,r){var t=e.children[0].text,n=e.children[1],o=e.children[2],a=r[c];if(!1!==p(a))return function(e,r,t){if(void 0===r)return void 0!==e;var n,o=""+e;if("regex"===t.type){n=y(t).test(o)}else n=o===t.text;"isnot"===r.type&&(n=!1===n&&void 0!==e);return n}(a[t],n,o)?r:void 0}};e.exports={expand:m,select:d,cache:h}},390:e=>{var r="[^?/{}*,()#]+",t='\nroot ::= ("#" recursion | recursion | (query | pattern) recursion* | "#" SEP? | SEP)\nrecursion ::= (SEP query | pattern)*\n\nquery ::= (ESC escaped ESC | property | all | any | regex) typecheck? lookahead?\nproperty ::= '.concat(r,'\nregex ::= "{" [^}]+ "}"\nSEP ::= "/"\nall ::= "**"\nany ::= "*"\n\ntypecheck ::= "?:" ("value" | "boolean" | "string" | "number" | "object" | "array")\nlookahead ::= "?" expression ((andExpr | orExpr) expression)*\nandExpr ::= S? "&&" S?\norExpr ::= S? "||" S?\n\nexpression ::= (exprProperty | ESC escaped ESC) ((isnot | is) (exprProperty | regex | ESC escaped ESC))*\nexprProperty ::= [a-zA-Z0-9-_ $]+\nescaped ::= [^"]+\nis ::= ":"\nisnot ::= ":!"\nESC ::= \'"\'\n\npattern ::= S? "(" (SEP query | pattern (orPattern? pattern)*)* ")" quantifier? S? lookahead?\nquantifier ::= "+" | "*" | [0-9]+\norPattern ::= S? "," S?\n\nS ::= [ ]*\n');e.exports={enbf:t,propertyRegex:r}},421:(e,r,t)=>{var n=t(460).default,o=t(390).enbf,a=/(children|text|type|start|end|rest|errors|fullText|\d+)/,i=/(children|text|type|\d+)/,u=new n.Parser(o);e.exports={parse:function(e){return u.getAST(e)},reduce:function(e){return JSON.parse(function(e){return JSON.stringify(e,(function(e,r){return""===e||"rest"===e&&""!==r||i.test(e)?r:void 0}),2)}(e))},toJSON:function(e){return JSON.stringify(e,(function(e,r){return""===e||a.test(e)?r:void 0}),2)}}},797:(e,r,t)=>{var n=t(689).delete,o=t(623),a=t(61),i=t(513),u=i.PARENT_INDEX,c=i.POINTER_INDEX;e.exports=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[],f=a(e,r,"all");return f.forEach((function(r){i.push(r[0]),n(e,r[c],!0)})),f.forEach((function(e){Array.isArray(e[u])&&o(e[u])})),t?i:e}},529:(e,r,t)=>{function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var a=t(390).propertyRegex,i=t(509),u=t(61),c=function(e){return JSON.parse(JSON.stringify(e))},f=Object.prototype.toString,s=function(e){return f.call(e).match(/\s([^\]]+)\]/).pop().toLowerCase()},l=new RegExp('^("[^"]+"|'.concat(a,")$")),p=["string","number","boolean","null"],y=/^\[\d*\]$/,h=/^\[(\d+)\]$/,m=/^".+"$/,d=/(^\[\d*\]$|^\d+$)/;function g(e){return parseInt(e.replace(/^(\[|\]$)/,""))}function E(e){return m.test(e)?e.replace(/(^"|"$)/g,""):e}function v(e,r,t,n){var o=e[0];if(/^\[\]$/.test(r)){o.push(t);var a=o.length-1;return[o[a],a,o,"".concat(e[3],"/").concat(a,"}")]}if(null==n&&"object"===s(o[r])&&"object"===s(t))return[o[r],r,o,"".concat(e[3],"/").concat(r,"}")];if(n===b.INSERT_ITEMS||null==n&&h.test(r))return function(e,r,t){e.length<=r?e[r]=t:e.splice(r,0,t)}(o,r=g(r),t),[o[r],r,o,"".concat(e[3],"/").concat(r,"}")];if(n===b.REPLACE_ITEMS||null==n)return o[r=g(r)]=t,[o[r],r,o,"".concat(e[3],"/").concat(r,"}")];throw new Error("Unknown array index '".concat(r,"' with force-option '").concat(n,"'"))}function b(e,r,t,o){if(null==r)return c(e);if(""===(r=r.replace(/(\/$)/g,"")))return c(t);var a=c(e),f=[[a,null,null,"#"]],m=i(r),g=m.pop(),b=y.test(g)&&!1===h.test(g);if(!1===l.test(g)||b)throw new Error("Unsupported query '".concat(r,"' ending with non-property"));return m.forEach((function(e,r){if("__proto__"!==e&&"prototyped"!==e&&"constructor"!==e)if(!1!==l.test(e)){var t=r>=m.length-1?g:m[r+1],a=d.test(t);f=function(e,r,t,n){return r=E(r),e.filter((function(e){return!(!Array.isArray(e[0])||!d.test(r))||!1===p.includes(s(e[0][r]))})).map((function(e){var o=t?[]:{},a=e[0];return Array.isArray(a)?v(e,r,o,n):(a[r]=a[r]||o,[a[r],r,a,"".concat(e[3],"/").concat(r)])}))}(f,e,a,o)}else f=function(e,r){var t=[];return e.forEach((function(e){return t.push.apply(t,n(u(e[0],r,u.ALL)))})),t}(f,e)})),f.forEach((function(e){var r=t;"function"===s(t)&&(r=t(e[3],g,e[0],"".concat(e[3],"/").concat(g)));var n=e[0];if(Array.isArray(n))v(e,g,r,o);else{var a=E(g);if("__proto__"===a||"prototyped"===a||"constructor"===a)return;n[a]=r}})),a}b.REPLACE_ITEMS="replace",b.INSERT_ITEMS="insert",e.exports=b},509:(e,r,t)=>{var n=t(421).parse,o=["root","recursion"];function a(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return o.includes(e.type)?(e.children.forEach((function(e){return a(e,r)})),r):(r.push(e.text),r)}e.exports=function(e){return null==e||""===e?[]:a(n(e))}},460:(e,r,t)=>{"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,r){return(a=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function i(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=c(e);if(r){var o=c(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return u(this,t)}}function u(e,r){return!r||"object"!==n(r)&&"function"!=typeof r?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):r}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(r,"__esModule",{value:!0});var f,s=t(547);!function(e){e.RULES=[{name:"Grammar",bnf:[["RULE_S*","%Atomic*","EOF"]]},{name:"%Atomic",bnf:[["Production","RULE_S*"]],fragment:!0},{name:"Production",bnf:[["NCName","RULE_S*",'"::="',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*","RULE_EOL+","RULE_S*"]]},{name:"NCName",bnf:[[/[a-zA-Z][a-zA-Z_0-9]*/]]},{name:"Choice",bnf:[["SequenceOrDifference","%_Choice_1*"]],fragment:!0},{name:"%_Choice_1",bnf:[["RULE_WHITESPACE*",'"|"',"RULE_WHITESPACE*","SequenceOrDifference"]],fragment:!0},{name:"SequenceOrDifference",bnf:[["Item","RULE_WHITESPACE*","%_Item_1?"]]},{name:"%_Item_1",bnf:[["Minus","Item"],["Item*"]],fragment:!0},{name:"Minus",bnf:[['"-"']]},{name:"Item",bnf:[["RULE_WHITESPACE*","%Primary","PrimaryDecoration?"]],fragment:!0},{name:"PrimaryDecoration",bnf:[['"?"'],['"*"'],['"+"']]},{name:"DecorationName",bnf:[['"ebnf://"',/[^\x5D#]+/]]},{name:"%Primary",bnf:[["NCName"],["StringLiteral"],["CharCode"],["CharClass"],["SubItem"]],fragment:!0},{name:"SubItem",bnf:[['"("',"RULE_WHITESPACE*","Choice","RULE_WHITESPACE*",'")"']]},{name:"StringLiteral",bnf:[["'\"'",/[^"]*/,"'\"'"],['"\'"',/[^']*/,'"\'"']],pinned:1},{name:"CharCode",bnf:[['"#x"',/[0-9a-zA-Z]+/]]},{name:"CharClass",bnf:[["'['","'^'?","%RULE_CharClass_1+",'"]"']]},{name:"%RULE_CharClass_1",bnf:[["CharCodeRange"],["CharRange"],["CharCode"],["RULE_Char"]],fragment:!0},{name:"RULE_Char",bnf:[[/\x09/],[/\x0A/],[/\x0D/],[/[\x20-\x5c]/],[/[\x5e-\uD7FF]/],[/[\uE000-\uFFFD]/]]},{name:"CharRange",bnf:[["RULE_Char",'"-"',"RULE_Char"]]},{name:"CharCodeRange",bnf:[["CharCode",'"-"',"CharCode"]]},{name:"RULE_WHITESPACE",bnf:[["%RULE_WHITESPACE_CHAR*"],["Comment","RULE_WHITESPACE*"]]},{name:"RULE_S",bnf:[["RULE_WHITESPACE","RULE_S*"],["RULE_EOL","RULE_S*"]]},{name:"%RULE_WHITESPACE_CHAR",bnf:[[/\x09/],[/\x20/]],fragment:!0},{name:"Comment",bnf:[['"/*"',"%RULE_Comment_Body*",'"*/"']]},{name:"%RULE_Comment_Body",bnf:[['!"*/"',/[^*]/]],fragment:!0},{name:"RULE_EOL",bnf:[[/\x0D/,/\x0A/],[/\x0A/],[/\x0D/]]},{name:"Link",bnf:[["'['","Url","']'"]]},{name:"Url",bnf:[[/[^\x5D:/?#]/,'"://"',/[^\x5D#]+/,"%Url1?"]]},{name:"%Url1",bnf:[['"#"',"NCName"]],fragment:!0}],e.defaultParser=new s.Parser(e.RULES,{debug:!1});var r=/^(!|&)/,t=/(\?|\+|\*)$/,n=/^%/;function u(e,o){if("string"==typeof e){if(r.test(e))return"";if(n.test(e)){var a=t.exec(e),i=a?a[0]+" ":"";return function(e,r){var t=s.findRuleByName(e,r);return t&&1==t.bnf.length&&1==t.bnf[0].length&&(t.bnf[0][0]instanceof RegExp||'"'==t.bnf[0][0][0]||"'"==t.bnf[0][0][0])}(e,o)?c(e,o)+i:"("+c(e,o)+")"+i}return e}return e.source.replace(/\\(?:x|u)([a-zA-Z0-9]+)/g,"#x$1").replace(/\[\\(?:x|u)([a-zA-Z0-9]+)-\\(?:x|u)([a-zA-Z0-9]+)\]/g,"[#x$1-#x$2]")}function c(e,r){var t=s.findRuleByName(e,r);return t?t.bnf.map((function(e){return function(e,r){return e.map((function(e){return u(e,r)})).join(" ")}(e,r)})).join(" | "):"RULE_NOT_FOUND {"+e+"}"}function f(e){var r=[];return e.grammarRules.forEach((function(t){if(!/^%/.test(t.name)){var n=t.recover?" /* { recoverUntil="+t.recover+" } */":"";r.push(t.name+" ::= "+c(t.name,e)+n)}})),r.join("\n")}e.emit=f;var l=0;function p(e){return new RegExp(e.replace(/#x([a-zA-Z0-9]{4})/g,"\\u$1").replace(/#x([a-zA-Z0-9]{3})/g,"\\u0$1").replace(/#x([a-zA-Z0-9]{2})/g,"\\x$1").replace(/#x([a-zA-Z0-9]{1})/g,"\\x0$1"))}function y(e,r,t){var n=null,o=[];return r.children.forEach((function(a,i){"Minus"==a.type&&function(e,r){throw console.log("reberia restar "+r+" a "+e),new Error("Difference not supported yet")}(n,a);var u=r.children[i+1];u=u&&"PrimaryDecoration"==u.type&&u.text||"";switch(a.type){case"SubItem":var c="%"+(t+l++);h(e,a,c),o.push(""+c+u);break;case"NCName":case"StringLiteral":o.push(""+a.text+u);break;case"CharCode":case"CharClass":if(u){var f={name:"%"+(t+l++),bnf:[[p(a.text)]]};e.push(f),o.push(""+f.name+u)}else o.push(p(a.text));break;case"PrimaryDecoration":break;default:throw new Error(" HOW SHOULD I PARSE THIS? "+a.type+" -> "+JSON.stringify(a.text))}n=a})),o}function h(e,r,t){var n=r.children.filter((function(e){return"SequenceOrDifference"==e.type})).map((function(r){return y(e,r,t)})),o={name:t,bnf:n},a=null;n.forEach((function(e){a=a||e.recover,delete e.recover})),0==t.indexOf("%")&&(o.fragment=!0),a&&(o.recover=a),e.push(o)}function m(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultParser,n=t.getAST(r);if(!n)throw new Error("Could not parse "+r);if(n.errors&&n.errors.length)throw n.errors[0];var o=[];return n.children.filter((function(e){return"Production"==e.type})).map((function(e){var r=e.children.filter((function(e){return"NCName"==e.type}))[0].text;h(o,e,r)})),o}e.getRules=m,e.Transform=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultParser;return m(r.join(""),t)};var d=function(r){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&a(e,r)}(l,r);var t,n,u,c=i(l);function l(r,t){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,l);var n=t&&!0===t.debugRulesParser?new s.Parser(e.RULES,{debug:!0}):e.defaultParser;return c.call(this,m(r,n),t)}return t=l,(n=[{key:"emitSource",value:function(){return f(this)}}])&&o(t.prototype,n),u&&o(t,u),l}(s.Parser);e.Parser=d}(f||(f={})),r.default=f},547:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Parser=exports.findRuleByName=exports.parseRuleName=exports.escapeRegExp=exports.readToken=void 0;var UPPER_SNAKE_RE=/^[A-Z0-9_]+$/,decorationRE=/(\?|\+|\*)$/,preDecorationRE=/^(@|&|!)/,WS_RULE="WS",TokenError_1=__webpack_require__(877);function readToken(e,r){var t=r.exec(e);return t&&0==t.index?0==t[0].length&&r.source.length>0?null:{type:null,text:t[0],rest:e.substr(t[0].length),start:0,end:t[0].length-1,fullText:t[0],errors:[],children:[],parent:null}:null}function escapeRegExp(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function fixRest(e){e.rest="",e.children&&e.children.forEach((function(e){return fixRest(e)}))}function fixPositions(e,r){e.start+=r,e.end+=r,e.children&&e.children.forEach((function(r){return fixPositions(r,e.start)}))}function agregateErrors(e,r){r.errors&&r.errors.length&&r.errors.forEach((function(r){return e.push(r)})),r.children&&r.children.forEach((function(r){return agregateErrors(e,r)}))}function parseRuleName(e){var r=decorationRE.exec(e),t=preDecorationRE.exec(e),n=r&&r[0]||"",o=t&&t[0]||"",a={raw:e,name:e.replace(decorationRE,"").replace(preDecorationRE,""),isOptional:"?"==n||"*"==n,allowRepetition:"+"==n||"*"==n,atLeastOne:"+"==n,lookupPositive:"&"==o,lookupNegative:"!"==o,pinned:"@"==o,lookup:!1,isLiteral:!1};return a.isLiteral="'"==a.name[0]||'"'==a.name[0],a.lookup=a.lookupNegative||a.lookupPositive,a}function findRuleByName(e,r){var t=parseRuleName(e);return r.cachedRules[t.name]||null}function stripRules(e,r){if(e.children){for(var t=e.children.filter((function(e){return e.type&&r.test(e.type)})),n=0;n<t.length;n++){var o=e.children.indexOf(t[n]);-1!=o&&e.children.splice(o,1)}e.children.forEach((function(e){return stripRules(e,r)}))}}exports.readToken=readToken,exports.escapeRegExp=escapeRegExp,exports.parseRuleName=parseRuleName,exports.findRuleByName=findRuleByName;var ignoreMissingRules=["EOF"],Parser=function(){function Parser(e,r){var t=this;_classCallCheck(this,Parser),this.grammarRules=e,this.options=r,this.cachedRules={},this.debug=!!r&&!0===r.debug;var n=[],o=[];if(e.forEach((function(e){var r=parseRuleName(e.name);if(r.name in t.cachedRules)n.push("Duplicated rule "+r.name);else{if(t.cachedRules[r.name]=e,e.bnf&&e.bnf.length)e.bnf.forEach((function(r){if("string"==typeof r[0]&&parseRuleName(r[0]).name==e.name){var t="Left recursion is not allowed, rule: "+e.name;-1==n.indexOf(t)&&n.push(t)}r.forEach((function(e){if("string"==typeof e){var r=parseRuleName(e);r.isLiteral||-1!=o.indexOf(r.name)||-1!=ignoreMissingRules.indexOf(r.name)||o.push(r.name)}}))}));else{var a="Missing rule content, rule: "+e.name;-1==n.indexOf(a)&&n.push(a)}WS_RULE==e.name&&(e.implicitWs=!1),e.implicitWs&&-1==o.indexOf(WS_RULE)&&o.push(WS_RULE),e.recover&&-1==o.indexOf(e.recover)&&o.push(e.recover)}})),o.forEach((function(e){e in t.cachedRules||n.push("Missing rule "+e)})),n.length)throw new Error(n.join("\n"))}return _createClass(Parser,[{key:"getAST",value:function(e,r){r||(r=this.grammarRules.filter((function(e){return!e.fragment&&0!=e.name.indexOf("%")}))[0].name);var t=this.parse(e,r);if(t){agregateErrors(t.errors,t),fixPositions(t,0),stripRules(t,/^%/),this.options&&this.options.keepUpperRules||stripRules(t,UPPER_SNAKE_RE);var n=t.rest;n&&new TokenError_1.TokenError("Unexpected end of input: \n"+n,t),fixRest(t),t.rest=n}return t}},{key:"emitSource",value:function(){return"CANNOT EMIT SOURCE FROM BASE Parser"}},{key:"parse",value:function parse(txt,target){var _this2=this,recursion=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,out=null,type=parseRuleName(target),expr,printable=this.debug&&!UPPER_SNAKE_RE.test(type.name);printable&&console.log(new Array(recursion).join("│  ")+"Trying to get "+target+" from "+JSON.stringify(txt.split("\n")[0]));var realType=type.name,targetLex=findRuleByName(type.name,this);if("EOF"==type.name){if(txt.length)return null;if(0==txt.length)return{type:"EOF",text:"",rest:"",start:0,end:0,fullText:"",errors:[],children:[],parent:null}}try{if(!targetLex&&type.isLiteral){var src=eval(type.name);if(""===src)return{type:"%%EMPTY%%",text:"",rest:txt,start:0,end:0,fullText:"",errors:[],children:[],parent:null};expr=new RegExp(escapeRegExp(src)),realType=null}}catch(e){return e instanceof ReferenceError&&console.error(e),null}if(expr){var result=readToken(txt,expr);if(result)return result.type=realType,result}else{var options=targetLex.bnf;options instanceof Array&&options.forEach((function(e){if(!out){var r=null,t={type:type.name,text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:txt};targetLex.fragment&&(t.fragment=!0);for(var n=txt,o=0,a=e.length>0,i=!1,u=0;u<e.length;u++)if("string"==typeof e[u]){var c=parseRuleName(e[u]);a=a&&c.isOptional;var f=void 0,s=!1;do{if(f=null,targetLex.implicitWs&&!(f=_this2.parse(n,c.name,recursion+1))){var l=void 0;do{if(!(l=_this2.parse(n,WS_RULE,recursion+1)))break;t.text=t.text+l.text,t.end=t.text.length,l.parent=t,t.children.push(l),n=n.substr(l.text.length),o+=l.text.length}while(l&&l.text.length)}if(f=f||_this2.parse(n,c.name,recursion+1),c.lookupNegative){if(f)return;break}if(c.lookupPositive&&!f)return;if(!f){if(c.isOptional)break;if(c.atLeastOne&&s)break}if(f&&targetLex.pinned==u+1&&(r=f,printable&&console.log(new Array(recursion+1).join("│  ")+"└─ "+f.type+" PINNED")),f||(f=_this2.parseRecovery(targetLex,n,recursion+1)),!f){if(!r)return;out=t,f={type:"SyntaxError",text:n,children:[],end:n.length,errors:[],fullText:"",parent:null,start:0,rest:""},n.length?new TokenError_1.TokenError("Unexpected end of input. Expecting ".concat(c.name," Got: ").concat(n),f):new TokenError_1.TokenError("Unexpected end of input. Missing ".concat(c.name),f),printable&&console.log(new Array(recursion+1).join("│  ")+"└─ "+f.type+" "+JSON.stringify(f.text))}if(s=!0,i=!0,"%%EMPTY%%"==f.type)break;f.start+=o,f.end+=o,!c.lookupPositive&&f.type&&(f.fragment?f.children&&f.children.forEach((function(e){e.start+=o,e.end+=o,e.parent=t,t.children.push(e)})):(f.parent=t,t.children.push(f))),c.lookup&&(f.lookup=!0),printable&&console.log(new Array(recursion+1).join("│  ")+"└─ "+f.type+" "+JSON.stringify(f.text)),c.lookup||f.lookup||(t.text=t.text+f.text,t.end=t.text.length,n=n.substr(f.text.length),o+=f.text.length),t.rest=n}while(f&&c.allowRepetition&&n.length&&!f.lookup)}else{var p=readToken(n,e[u]);if(!p)return;printable&&console.log(new Array(recursion+1).join("│  ")+"└> "+JSON.stringify(p.text)+e[u].source),i=!0,p.start+=o,p.end+=o,t.text=t.text+p.text,t.end=t.text.length,n=n.substr(p.text.length),o+=p.text.length,t.rest=n}i&&(out=t,printable&&console.log(new Array(recursion).join("│  ")+"├<─┴< PUSHING "+out.type+" "+JSON.stringify(out.text)))}})),out&&targetLex.simplifyWhenOneChildren&&1==out.children.length&&(out=out.children[0])}return out||printable&&console.log(target+" NOT RESOLVED FROM "+txt),out}},{key:"parseRecovery",value:function(e,r,t){if(e.recover&&r.length){var n=this.debug;n&&console.log(new Array(t+1).join("│  ")+"Trying to recover until token "+e.recover+" from "+JSON.stringify(r.split("\n")[0]+r.split("\n")[1]));var o,a={type:"SyntaxError",text:"",children:[],end:0,errors:[],fullText:"",parent:null,start:0,rest:""};do{if(o=this.parse(r,e.recover,t+1)){new TokenError_1.TokenError('Unexpected input: "'+a.text+'" Expecting: '.concat(e.name),a);break}a.text=a.text+r[0],a.end=a.text.length,r=r.substr(1)}while(!o&&r.length>0);if(a.text.length>0&&o)return n&&console.log(new Array(t+1).join("│  ")+"Recovered text: "+JSON.stringify(a.text)),a}return null}}]),Parser}();exports.Parser=Parser,exports.default=Parser},877:(e,r)=>{"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?a(e):r}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return u(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)})(e)}function u(e,r,t){return(u=c()?Reflect.construct:function(e,r,t){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(e,n));return t&&f(o,t.prototype),o}).apply(null,arguments)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function f(e,r){return(f=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(r,"__esModule",{value:!0}),r.TokenError=void 0;var l=function(e){!function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&f(e,r)}(y,e);var r,t,i,u,l,p=(r=y,t=c(),function(){var e,n=s(r);if(t){var a=s(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return o(this,e)});function y(e,r){var t;if(function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,y),(t=p.call(this,e)).message=e,t.token=r,!r||!r.errors)throw a(t);return r.errors.push(a(t)),t}return i=y,(u=[{key:"inspect",value:function(){return"SyntaxError: "+this.message}}])&&n(i.prototype,u),l&&n(i,l),y}(i(Error));r.TokenError=l},66:e=>{"use strict";e.exports=function(e){return Array.isArray(e)?e:"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).map((function(r){return e[r]})):[]}},920:e=>{"use strict";e.exports=function(e,r){Array.isArray(e)?e.forEach(r):"[object Object]"===Object.prototype.toString.call(e)&&Object.keys(e).forEach((function(t){r(e[t],t,e)}))}},134:(e,r,t)=>{"use strict";r.values=t(546),r.asArray=t(66),r.forEach=t(920),r.keyOf=t(213),r.keys=t(231)},213:(e,r,t)=>{"use strict";var n=t(920);e.exports=function(e,r){var t=null;return n(e,(function(e,n){r===e&&(t=n)})),t}},231:e=>{"use strict";e.exports=function(e){var r;if(Array.isArray(e))r=e.map((function(e,r){return r}));else{if("[object Object]"===Object.prototype.toString.call(e))return Object.keys(e);r=[]}return r}},546:e=>{"use strict";e.exports=function(e){return Array.isArray(e)?e:"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).map((function(r){return e[r]})):null!=e?[e]:[]}},689:(e,r,t)=>{"use strict";t(254),t(921),r.delete=t(33),t(783),t(385),t(429)},33:(e,r,t)=>{"use strict";var n=t(385),o=t(254),a=t(623);e.exports=function(e,r,t){var i=n(r),u=i.pop(),c=o(e,i);return c&&delete c[u],Array.isArray(c)&&!0!==t&&a(c),e}},254:(e,r,t)=>{"use strict";var n=t(385),o=t(429);function a(e,r){var t=r.shift();if(void 0!==e)return void 0!==t?a(e[t],r):e}e.exports=function(e,r,t){if(null==r||null==e)return t;if(o(r))return e;var i=a(e,n(r));return void 0===i?t:i}},429:e=>{e.exports=function(e){return"#"===e||""===e}},783:(e,r,t)=>{"use strict";var n=t(385),o=(Object.prototype.toString,Array.prototype.join,/\/+/g),a=/~/g,i=/\//g;function u(e,r){if(0===e.length)return r?"#":"";e.join("/");for(var t=0,n=e.length;t<n;t+=1)e[t]=e[t].replace(a,"~0").replace(i,"~1"),r&&(e[t]=encodeURIComponent(e[t]));return((r?"#/":"/")+e.join("/")).replace(o,"/")}e.exports=function(e){var r=[];if(Array.isArray(e))return u(e,!0===arguments[1]);for(var t=arguments[arguments.length-1],o="boolean"==typeof t?t:e&&"#"===e[0],a=0,i=arguments.length;a<i;a+=1)r.push.apply(r,n(arguments[a]));var c=[];for(a=0,i=r.length;a<i;a+=1)if(".."===r[a]){if(0===c.length)return o?"#":"";c.pop()}else c.push(r[a]);return u(c,o)}},623:e=>{"use strict";e.exports=function(e){for(var r=0,t=0;r+t<e.length;)void 0===e[r+t]&&(t+=1),e[r]=e[r+t],r+=1;return e.length=e.length-t,e}},921:(e,r,t)=>{"use strict";var n=t(385),o=/^\[.*\]$/,a=/^\[(.+)\]$/;function i(e,r,t){var n=r.match(a);"[]"===r&&Array.isArray(e)?e.push(t):n?e[n.pop()]=t:e[r]=t}function u(e,r,t){if(null!=e[r])return e[r];var n=t?[]:{};return i(e,r,n),n}e.exports=function(e,r,t){if(null==r)return e;var a=n(r);if(0===a.length)return e;null==e&&(e=o.test(a[0])?[]:{});for(var c=e;a.length>1;)c=u(c,a.shift(),o.test(a[0]));return i(c,a.pop(),t),e}},385:(e,r,t)=>{"use strict";var n=t(429),o=/~1/g,a=/~0/g,i=/\/+/g,u=/(^[#/]*|\/+$)/g;function c(e){return e.replace(o,"/").replace(a,"~")}function f(e){return c(decodeURIComponent(e))}e.exports=function(e){if(null==e||"string"!=typeof e||n(e))return Array.isArray(e)?e:[];for(var r=e.indexOf("#")>=0?f:c,t=(e=(e=e.replace(i,"/")).replace(u,"")).split("/"),o=0,a=t.length;o<a;o+=1)t[o]=r(t[o]);return t}}},__webpack_module_cache__={};function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__(241)})();